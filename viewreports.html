<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Reepot</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="static/css/wireframe.css" rel="stylesheet">
</head>
<body>
<div class="container py-3">

  <header class="d-flex align-items-center justify-content-between wf-head mb-3">
    <div class="d-flex align-items-center gap-3">
      <img src="static/images/Reepotlogo.png" alt="logo" style="height:48px">
      <div><h4 class="mb-0">Community Incident Reporting System</h4></div>
    </div>
    <nav class="d-none d-md-flex">
      <a class="btn btn-sm me-2 btn-outline-secondary" href="index.html">Home</a>
      <a class="btn btn-sm me-2 btn-outline-primary" href="createreport.html">Create Report</a>
      <a class="btn btn-sm me-2 btn-primary" href="viewreports.html">View Reports</a>
    </nav>
  </header>


  <div class="container">
    
    

<h4>All Reports</h4>
<div id="reportList"></div>
<script>
  const reportList = document.getElementById('reportList');
  function loadReports() {
    const data = JSON.parse(localStorage.getItem('reports') || '[]');
    reportList.innerHTML = '';
    data.forEach((r, i) => {
      const card = document.createElement('div');
      card.className = 'card mb-3';
      card.innerHTML = `
        <div class="card-body">
          <h5>${r.title} - <small>${r.location}</small></h5>
          <h6 class="text-muted">${r.name} | ${r.email}<small> <br> Submitted on: ${r.date}</small></h6>
          <p>${r.description}</p>
          ${r.image ? `<img src="${r.image}" alt="incident" class="img-fluid mb-2" style="max-width: 100%; height: 200px; object-fit: cover;"/>` : ''}
          <button onclick="edit(${i})" class="btn btn-warning btn-sm">Edit</button>
          <button onclick="remove(${i})" class="btn btn-danger btn-sm">Delete</button>
        </div>
      `;
      reportList.appendChild(card);
    });
  }

  function remove(index) {
    const data = JSON.parse(localStorage.getItem('reports') || '[]');
    data.splice(index, 1);
    localStorage.setItem('reports', JSON.stringify(data));
    alert('Report has been successfully deleted.');
    loadReports();
  }

  function edit(index) {
    localStorage.setItem('editIndex', index);
    window.location.href = 'editreport.html';
  }

  loadReports();
</script>

  </div>

</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body></html>